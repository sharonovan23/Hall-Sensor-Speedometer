//calculations for tire
//circumference = 2*pi*r = ~1.83531842613 m
//tire radius = ~0.2921
//max speed = ~40 km/h = ~11.1111 m/s
#include <LiquidCrystal.h>
LiquidCrystal lcd(4, 5, 6, 7, 10, 11);

const int buzzerPin = 9;
const int ledPin = 13;
const int hallPin = 12;
const int pi = 3.14159265;
float radius = 0.2921;
int state = 0;
unsigned long deltaTime = 0; //time b/t one full rotation (0 ms)
float circumference;
unsigned long speedRead;
volatile long oldTime;
volatile long t = oldTime;
long SPEED;

void setup() {
pinMode(ledPin, OUTPUT);
pinMode(hallPin, INPUT);
pinMode(buzzerPin, OUTPUT);
Serial.begin(9600);
lcd.begin(16,2);
attachInterrupt(0, speedRead, RISING);
circumference = 2*pi*radius;




}

void loop() {
lcd.clear();
lcd.setCursor(0,0);
lcd.print("  SPEED  COUNTER  ");
lcd.setCursor(0,1);
lcd.print(SPEED);
lcd.print(" SPEED");
lcd.print("   ");  
state = digitalRead(hallPin);
delay(10);



if (state == LOW) {
  digitalWrite(ledPin, HIGH);
  digitalWrite(buzzerPin, HIGH);
  delay(1000);


}

else {
  digitalWrite(ledPin, LOW);
  digitalWrite(buzzerPin, LOW);
  delay(1000);

}



{
void speedRead(); 
    t = micros();
    deltaTime = t - oldTime;
    oldTime = t;
    SPEED = (deltaTime/circumference)*1000;
    
  }




}










